<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="MlAWwzcGEsG8nn2V34gojElRFcnHeEgBvIS8Ek1LQ0c"><meta name="msvalidate.01" content="8BDA269F1F25AB9AB2160E377B2334C5"><link rel="alternate" type="application/rss+xml" title="Follow your heart" href="http://mingcheng.site/rss.xml"><link rel="alternate" type="application/atom+xml" title="Follow your heart" href="http://mingcheng.site/atom.xml"><link rel="alternate" type="application/json" title="Follow your heart" href="http://mingcheng.site/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="sql,oracle,Python,SQLAlchemy"><link rel="canonical" href="http://mingcheng.site/learn/database/oracle/SQL%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E4%B9%8B%E7%BB%91%E5%AE%9A%E5%8F%98%E9%87%8F/"><title>SQL 查询优化之绑定变量 - Oracle - 数据库学习 - 学习 | Jalen's Blog = Follow your heart = A happy life</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">SQL 查询优化之绑定变量</h1><div class="meta"><span class="item" title="创建时间：2022-01-20 14:34:43"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-01-20T14:34:43+08:00">2022-01-20</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>4.9k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>4 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Jalen's Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://s2.loli.net/2023/01/05/URhMtT1S6YQNdPe.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/u7iVNdLOj23xRGq.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/ckCrlM4Qxotug6f.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/mvgeVdc61TojIA3.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/BbCxJjVTwHmqiS1.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/TVG6IvNdyF92bRe.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learn/" itemprop="item" rel="index" title="分类于 学习"><span itemprop="name">学习</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learn/database/" itemprop="item" rel="index" title="分类于 数据库学习"><span itemprop="name">数据库学习</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learn/database/Oracle/" itemprop="item" rel="index" title="分类于 Oracle"><span itemprop="name">Oracle</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mingcheng.site/learn/database/oracle/SQL%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E4%B9%8B%E7%BB%91%E5%AE%9A%E5%8F%98%E9%87%8F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Jalen Chu"><meta itemprop="description" content="A happy life, ٩(●˙▿˙●)۶…⋆ฺ ->"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Follow your heart"></span><div class="body md" itemprop="articleBody"><h1 id="sql绑定参数"><a class="anchor" href="#sql绑定参数">#</a> SQL 绑定参数</h1><p>我们日常写 sql 查询语句最常用的有两种方式，一种是 raw sql（替换变量或文字编写 SQL 语句），一种是 bind variable，两种区别很大。通常使用绑定变量可以最大限度地减少数据库服务器处理时间，并且可以将应用程序性能提高 20% 到 30%。同时可以避免 sql 注入风险。</p><h2 id="检测top-sql"><a class="anchor" href="#检测top-sql">#</a> 检测 top sql</h2><p>我们可以通过下面 sql 查询当前 oracle 服务器 top sql，通常这些 top sql 都没有使用绑定变量方式，并且这些 sql 每次 oracle cbo 都要重复解析，所以会占用很大的内存资源，拖慢了 oracle 运行速度。下面是查询内存中当前 cache 的全局查询语句（检测执行频率为 1000 以上）。</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">select</span> <span class="token operator">*</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">from</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="3"></td><td><pre>         <span class="token keyword">select</span> substr<span class="token punctuation">(</span>sql_text<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> numbers</pre></td></tr><tr><td data-num="4"></td><td><pre>         <span class="token keyword">from</span> gv$<span class="token keyword">sql</span></pre></td></tr><tr><td data-num="5"></td><td><pre>         <span class="token keyword">group</span> <span class="token keyword">by</span> substr<span class="token punctuation">(</span>sql_text<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>         <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1000</span></pre></td></tr><tr><td data-num="7"></td><td><pre>     <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">order</span> <span class="token keyword">by</span> numbers <span class="token keyword">desc</span></pre></td></tr></table></figure><blockquote><p>gv@sql: The view you are using gets the information from the shared sql area of the shared pool. This is SQL Oracle caches to avoid parsing queries that are the same as others recently parsed. How long text gets retained depends on several factors among which are space available, how recently the text was reused, and the volume of SQL parsed. This means the contents of the sql shared area are dynamic and may not retain certain text at different times during the day.</p></blockquote><h2 id="使用"><a class="anchor" href="#使用">#</a> 使用</h2><p>python 可以使用冒号（:）进行变量绑定，对于使用绑定变量这种方式的查询，gv$sql 只会产生 1 条解析记录。比如 insert into table_user (name, age) values ('jalen', '30') 如果绑定变量，那么这个 query 在数据库里看起来就会大致变成这样子：insert into table_user values (name, age) values (:1, :2)。</p><p>下面针对一些特殊查询，比如 like 查询，in 查询和 between 查询，列举一些 python orm 中可以使用的绑定变量方式。</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">from</span> sqlalchemy <span class="token keyword">import</span> text<span class="token punctuation">,</span> create_engine<span class="token punctuation">,</span> bindparam<span class="token punctuation">,</span> DateTime</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>pool <span class="token keyword">import</span> NullPool</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">from</span> config <span class="token keyword">import</span> NewConfig</pre></td></tr><tr><td data-num="8"></td><td><pre>engine <span class="token operator">=</span> create_engine<span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> poolclass<span class="token operator">=</span>NullPool<span class="token punctuation">,</span> echo<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">def</span> <span class="token function">like_query_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    text1 <span class="token operator">=</span> <span class="token string">'jalen'</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    sql1 <span class="token operator">=</span> <span class="token string">"select * from table_test where TEXT like :text || '%'"</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql1<span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">[</span>text1<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>df1<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    text2 <span class="token operator">=</span> <span class="token string">'query1'</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    sql2 <span class="token operator">=</span> <span class="token string">"select * from table_test where TEXT like '%' || :text"</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql2<span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">[</span>text2<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>df2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    text3 <span class="token operator">=</span> <span class="token string">'test'</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    sql3 <span class="token operator">=</span> <span class="token string">"select * from table_test where TEXT like '%' || :text || '%'"</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    df3 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql3<span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">[</span>text3<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>df3<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    text1 <span class="token operator">=</span> <span class="token string">'jalen'</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    sql1 <span class="token operator">=</span> <span class="token string">"select * from table_test where TEXT like :text || '%'"</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    res1 <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token operator">=</span>text1<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    res1 <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token operator">=</span>text1<span class="token punctuation">)</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre>    text2 <span class="token operator">=</span> <span class="token string">'query1'</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    sql2 <span class="token operator">=</span> <span class="token string">"select * from table_test where TEXT like '%' || :text"</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    res2 <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token operator">=</span>text2<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    res2 <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token operator">=</span>text2<span class="token punctuation">)</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>    text3 <span class="token operator">=</span> <span class="token string">'test'</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    sql3 <span class="token operator">=</span> <span class="token string">"select * from table_test where TEXT like '%' || :text || '%'"</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    res3 <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql3<span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token operator">=</span>text3<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    res3 <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql3<span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token operator">=</span>text3<span class="token punctuation">)</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>res3<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">def</span> <span class="token function">in_query_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    sql <span class="token operator">=</span> text<span class="token punctuation">(</span><span class="token string">'SELECT CODE, TEXT, CREATETIME FROM table_test WHERE code IN :code_list'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    sql <span class="token operator">=</span> sql<span class="token punctuation">.</span>bindparams<span class="token punctuation">(</span>bindparam<span class="token punctuation">(</span><span class="token string">'code_list'</span><span class="token punctuation">,</span> expanding<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    res <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> code_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'code_list'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token keyword">def</span> <span class="token function">between_query_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    from_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">'2021-09-10 06:09:11'</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    to_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">'2022-01-13 09:22:36'</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    sql <span class="token operator">=</span> <span class="token string">"select CODE, TEXT, CREATETIME "</span> \</pre></td></tr><tr><td data-num="59"></td><td><pre>          <span class="token string">"  from table_test "</span> \</pre></td></tr><tr><td data-num="60"></td><td><pre>          <span class="token string">" where CREATETIME between :from_date and :to_date"</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    res <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">,</span> from_date<span class="token operator">=</span>from_date<span class="token punctuation">,</span> to_date<span class="token operator">=</span>to_date<span class="token punctuation">)</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">[</span>from_date<span class="token punctuation">,</span> to_date<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'from_date'</span><span class="token punctuation">:</span> from_date<span class="token punctuation">,</span> <span class="token string">'to_date'</span><span class="token punctuation">:</span> to_date<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="64"></td><td><pre></pre></td></tr><tr><td data-num="65"></td><td><pre>    from_date <span class="token operator">=</span> <span class="token string">'2021-09-10 06:09:11'</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    to_date <span class="token operator">=</span> <span class="token string">'2022-01-13 09:22:36'</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    sql <span class="token operator">=</span> <span class="token string">"select CODE, TEXT, CREATETIME "</span> \</pre></td></tr><tr><td data-num="68"></td><td><pre>          <span class="token string">"  from table_test "</span> \</pre></td></tr><tr><td data-num="69"></td><td><pre>          <span class="token string">" where CREATETIME between "</span> \</pre></td></tr><tr><td data-num="70"></td><td><pre>          <span class="token string">"         to_date(:from_date, 'YYYY-MM-DD hh24:mi:ss') and "</span> \</pre></td></tr><tr><td data-num="71"></td><td><pre>          <span class="token string">"         to_date(:to_date, 'YYYY-MM-DD hh24:mi:ss')"</span></pre></td></tr><tr><td data-num="72"></td><td><pre>    res <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">,</span> from_date<span class="token operator">=</span>from_date<span class="token punctuation">,</span> to_date<span class="token operator">=</span>to_date<span class="token punctuation">)</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="73"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">[</span>from_date<span class="token punctuation">,</span> to_date<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="74"></td><td><pre></pre></td></tr><tr><td data-num="75"></td><td><pre>    from_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">'2021-09-10 06:09:12'</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="76"></td><td><pre>    to_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">'2022-01-13 09:22:35'</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="77"></td><td><pre>    sql <span class="token operator">=</span> <span class="token string">"select CODE, TEXT, CREATETIME "</span> \</pre></td></tr><tr><td data-num="78"></td><td><pre>          <span class="token string">"  from table_test "</span> \</pre></td></tr><tr><td data-num="79"></td><td><pre>          <span class="token string">" where CREATETIME >= :from_date "</span> \</pre></td></tr><tr><td data-num="80"></td><td><pre>          <span class="token string">"   and CREATETIME &lt;= :to_date"</span></pre></td></tr><tr><td data-num="81"></td><td><pre>    res <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">,</span> from_date<span class="token operator">=</span>from_date<span class="token punctuation">,</span> to_date<span class="token operator">=</span>to_date<span class="token punctuation">)</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="82"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">[</span>from_date<span class="token punctuation">,</span> to_date<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="83"></td><td><pre></pre></td></tr><tr><td data-num="84"></td><td><pre>    from_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">'2021-09-10 06:09:12'</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="85"></td><td><pre>    to_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">'2022-01-13 09:22:35'</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="86"></td><td><pre>    sql <span class="token operator">=</span> <span class="token string">"select CODE, TEXT, CREATETIME "</span> \</pre></td></tr><tr><td data-num="87"></td><td><pre>          <span class="token string">"  from table_test "</span> \</pre></td></tr><tr><td data-num="88"></td><td><pre>          <span class="token string">" where CREATETIME >= :from_date "</span> \</pre></td></tr><tr><td data-num="89"></td><td><pre>          <span class="token string">"   and CREATETIME &lt;= :to_date"</span></pre></td></tr><tr><td data-num="90"></td><td><pre>    sql <span class="token operator">=</span> text<span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">.</span>bindparams<span class="token punctuation">(</span>bindparam<span class="token punctuation">(</span><span class="token string">'from_date'</span><span class="token punctuation">,</span> from_date<span class="token punctuation">,</span> DateTime<span class="token punctuation">)</span><span class="token punctuation">,</span> bindparam<span class="token punctuation">(</span><span class="token string">'to_date'</span><span class="token punctuation">,</span> to_date<span class="token punctuation">,</span> DateTime<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="91"></td><td><pre>    res <span class="token operator">=</span> engine<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="92"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> engine<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="93"></td><td><pre></pre></td></tr><tr><td data-num="94"></td><td><pre></pre></td></tr><tr><td data-num="95"></td><td><pre><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="96"></td><td><pre>    like_query_test<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="97"></td><td><pre>    in_query_test<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="98"></td><td><pre>    between_query_test<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="99"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'End!'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="sql注入测试"><a class="anchor" href="#sql注入测试">#</a> sql 注入测试</h2><p>并且使用绑定变量方式能够有效避免 sql 注入。比如下面的注入例子。</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">def</span> <span class="token function">pandas_sql_inject_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    inject_text <span class="token operator">=</span> <span class="token string">"1' or 1=1 --"</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment"># 替换变量，导致 sql 注入，将全表数据返回</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    sql <span class="token operator">=</span> <span class="token string">"select CODE, TEXT, CREATETIME from table_test where text='&#123;0&#125;'"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>inject_text<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> engine<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    sql <span class="token operator">=</span> <span class="token string">"select CODE, TEXT, CREATETIME from table_test where text='%s'"</span> <span class="token operator">%</span> inject_text</pre></td></tr><tr><td data-num="9"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> engine<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment"># 使用 DB-API 规范的绑定变量形式，有效避免了 sql 注入风险</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    sql <span class="token operator">=</span> <span class="token string">"select CODE, TEXT, CREATETIME from table_test where text=:text"</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">[</span>inject_text<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    sql <span class="token operator">=</span> <span class="token string">"select CODE, TEXT, CREATETIME from table_test where text=:text"</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>text<span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">,</span> engine<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'text'</span><span class="token punctuation">:</span> inject_text<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span></pre></td></tr></table></figure><div class="tags"><a href="/tags/sql/" rel="tag"><i class="ic i-tag"></i> sql</a> <a href="/tags/oracle/" rel="tag"><i class="ic i-tag"></i> oracle</a> <a href="/tags/Python/" rel="tag"><i class="ic i-tag"></i> Python</a> <a href="/tags/SQLAlchemy/" rel="tag"><i class="ic i-tag"></i> SQLAlchemy</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2025-12-05 23:27:51" itemprop="dateModified" datetime="2025-12-05T23:27:51+08:00">2025-12-05</time> </span><span id="learn/database/oracle/SQL查询优化之绑定变量/" class="item leancloud_visitors" data-flag-title="SQL 查询优化之绑定变量" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/mywechatpay.png" alt="Jalen Chu 微信支付"><p>微信支付</p></div><div><img data-src="/images/myalipay.png" alt="Jalen Chu 支付宝"><p>支付宝</p></div><div><img data-src="/images/mywxgzh.png" alt="Jalen Chu 公众号"><p>公众号</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Jalen Chu <i class="ic i-at"><em>@</em></i>Follow your heart</li><li class="link"><strong>本文链接：</strong> <a href="http://mingcheng.site/learn/database/oracle/SQL%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E4%B9%8B%E7%BB%91%E5%AE%9A%E5%8F%98%E9%87%8F/" title="SQL 查询优化之绑定变量">http://mingcheng.site/learn/database/oracle/SQL查询优化之绑定变量/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/learn/python/python-basic/python%E5%90%AF%E7%94%A8%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B9%B6%E8%A1%8C%E6%89%A7%E8%A1%8Csql%E6%9F%A5%E8%AF%A2/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;01&#x2F;05&#x2F;6BVdFcJpCO1I8nq.jpg" title="python启用线程池多线程并行执行sql查询"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Python</span><h3>python启用线程池多线程并行执行sql查询</h3></a></div><div class="item right"><a href="/learn/python/python-basic/Python%E8%8E%B7%E5%8F%96%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%BB%93%E6%9E%9C%E9%9B%86/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;01&#x2F;05&#x2F;c2Af7rxKodnCkbt.jpg" title="Python获取存储过程结果集"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Python</span><h3>Python获取存储过程结果集</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#sql%E7%BB%91%E5%AE%9A%E5%8F%82%E6%95%B0"><span class="toc-number">1.</span> <span class="toc-text">SQL 绑定参数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A3%80%E6%B5%8Btop-sql"><span class="toc-number">1.1.</span> <span class="toc-text">检测 top sql</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.</span> <span class="toc-text">sql 注入测试</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/learn/database/oracle/%E6%80%8E%E4%B9%88%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD/" rel="bookmark" title="怎么提高数据库性能">怎么提高数据库性能</a></li><li><a href="/learn/database/oracle/oracle.sql.TIMESTAMP%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%88%90%E5%9B%BA%E5%AE%9A%E6%A0%BC%E5%BC%8F%E7%9A%84date%E7%B1%BB%E5%9E%8B/" rel="bookmark" title="oracle.sql.TIMESTAMP类型转成固定格式的date类型">oracle.sql.TIMESTAMP类型转成固定格式的date类型</a></li><li><a href="/learn/database/oracle/oracle%E5%88%86%E7%BB%84%E5%8F%96%E5%89%8D5%E6%9D%A1%E6%95%B0%E6%8D%AE/" rel="bookmark" title="oracle分组取前5条数据">oracle分组取前5条数据</a></li><li><a href="/learn/database/oracle/oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%97%E6%AE%B5%E9%99%8D%E7%B2%BE%E5%BA%A6/" rel="bookmark" title="oracle数据库字段降精度">oracle数据库字段降精度</a></li><li><a href="/learn/database/oracle/oracle%E6%8B%86%E5%88%86%E6%9F%90%E4%B8%AA%E5%AD%97%E6%AE%B5/" rel="bookmark" title="oracle拆分某个字段">oracle拆分某个字段</a></li><li><a href="/learn/database/oracle/%E5%B0%86%E4%B8%80%E4%B8%AA%E8%A1%A8%E4%B8%AD%E6%9F%90%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%9B%B4%E6%96%B0%EF%BC%88copy%EF%BC%89%E5%88%B0%E5%8F%A6%E4%B8%80%E5%BC%A0%E8%A1%A8/" rel="bookmark" title="将一个表中某个字段更新（copy）到另一张表">将一个表中某个字段更新（copy）到另一张表</a></li><li><a href="/learn/database/oracle/oracle%E5%88%97varchar%E8%BD%ACclob/" rel="bookmark" title="oracle列varchar转clob">oracle列varchar转clob</a></li><li><a href="/learn/database/oracle/oracle%E8%A1%A8%E5%A4%87%E4%BB%BD/" rel="bookmark" title="oracle表备份">oracle表备份</a></li><li><a href="/learn/database/oracle/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F%EF%BC%88wiki%EF%BC%89/" rel="bookmark" title="数据库范式（wiki）">数据库范式（wiki）</a></li><li><a href="/learn/database/oracle/oracle%20call%20vs%20exec%5Bute%5D/" rel="bookmark" title="oracle call vs exec[ute]">oracle call vs exec[ute]</a></li><li><a href="/learn/database/oracle/oracle%20merge%20into%EF%BC%88%E4%B8%80%E6%9D%A1%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E6%9B%B4%E6%96%B0%E6%88%96%E6%8F%92%E5%85%A5%EF%BC%89/" rel="bookmark" title="oracle merge into（一条语句执行更新或插入）">oracle merge into（一条语句执行更新或插入）</a></li><li><a href="/learn/database/oracle/oracle%E5%8F%96%E5%B8%A6%E6%9C%89%E5%B0%8F%E6%95%B0%E7%9A%84%E8%AE%B0%E5%BD%95/" rel="bookmark" title="oracle取带有小数的记录">oracle取带有小数的记录</a></li><li><a href="/learn/database/oracle/oracle%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E7%BB%9F%E8%AE%A1%E5%90%84%E7%BB%84%E8%AE%B0%E5%BD%95%E6%95%B0%E9%87%8F/" rel="bookmark" title="oracle根据条件统计各组记录数量">oracle根据条件统计各组记录数量</a></li><li><a href="/learn/database/oracle-performance/02%20SQL%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/" rel="bookmark" title="(2) SQL查询优化">(2) SQL查询优化</a></li><li><a href="/learn/database/oracle-performance/03%20SQL%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E8%A1%A5%E5%85%85/" rel="bookmark" title="(3) SQL查询优化（补）">(3) SQL查询优化（补）</a></li><li><a href="/learn/database/oracle-performance/01%20SQL%E5%9F%BA%E7%A1%80/" rel="bookmark" title="(1) SQL基础">(1) SQL基础</a></li><li><a href="/learn/database/oracle/oracle%E4%B8%80%E5%88%97%E6%8B%86%E5%A4%9A%E5%88%97/" rel="bookmark" title="oracle一列拆多列">oracle一列拆多列</a></li><li><a href="/learn/database/oracle/oracle%E5%AF%B9%E4%B8%A4%E7%BB%84%E6%95%B0%E6%8D%AE%E6%B1%82%E5%B7%AE%E9%9B%86%E3%80%81%E5%B9%B6%E9%9B%86%E3%80%81%E4%BA%A4%E9%9B%86/" rel="bookmark" title="oracle对两组数据求差集、并集、交集">oracle对两组数据求差集、并集、交集</a></li><li class="active"><a href="/learn/database/oracle/SQL%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E4%B9%8B%E7%BB%91%E5%AE%9A%E5%8F%98%E9%87%8F/" rel="bookmark" title="SQL查询优化之绑定变量">SQL查询优化之绑定变量</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Jalen Chu" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Jalen Chu</p><div class="description" itemprop="description">٩(●˙▿˙●)۶…⋆ฺ -></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">700</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">100</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">210</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1NpbmNlcmVseVVuaXF1ZQ==" title="https:&#x2F;&#x2F;github.com&#x2F;SincerelyUnique"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9qYWxlbl9jaHU=" title="https:&#x2F;&#x2F;twitter.com&#x2F;jalen_chu"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9qYWxlbmNodQ==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;jalenchu"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvbXkvbS9tdXNpYy9wbGF5bGlzdD9pZD0yMDMxOTczNDY0" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;my&#x2F;m&#x2F;music&#x2F;playlist?id&#x3D;2031973464"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20veW91cm5hbWU=" title="https:&#x2F;&#x2F;weibo.com&#x2F;yourname"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS9KYWxlbkNodQ==" title="https:&#x2F;&#x2F;about.me&#x2F;JalenChu"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjExNTIzNTc0NzlAcXEuY29t" title="mailto:1152357479@qq.com"><i class="ic i-envelope"></i></span> <span class="exturl item facebook" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2phbGVuLmNodS43OTIv" title="https:&#x2F;&#x2F;www.facebook.com&#x2F;jalen.chu.792&#x2F;"><i class="ic i-facebook"></i></span> <span class="exturl item stackoverflow" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy8xMTExNzYxOC9qYWxlbi1jaHU=" title="https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;11117618&#x2F;jalen-chu"><i class="ic i-stack-overflow"></i></span> <span class="exturl item youtube" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vY2hhbm5lbC9VQ3FQRnVtUGpGMWVRdVJrdWp0NUR1YWc=" title="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCqPFumPjF1eQuRkujt5Duag"><i class="ic i-youtube"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/webstack/" rel="section"><i class="ic i-user"></i>网址</a></li><li class="item dropdown"><a href="/html/%E5%9C%88%E5%B0%8F%E7%8C%AB.html" rel="section"><i class="ic i-tags"></i>玩耍</a><ul class="submenu"><li class="item"><a href="/html/%E5%9C%88%E5%B0%8F%E7%8C%AB.html" rel="section"><i class="ic i-tags"></i>圈小猫</a></li><li class="item"><a href="/html/%E6%92%95%E6%B8%94%E7%BD%91.html" rel="section"><i class="ic i-tags"></i>撕渔网</a></li><li class="item"><a href="/html/%E5%BD%A9%E8%99%B9%E9%9B%A8.html" rel="section"><i class="ic i-tags"></i>彩虹雨</a></li><li class="item"><a href="/html/%E6%96%B9%E5%9D%97%E7%A9%BF%E6%A2%AD.html" rel="section"><i class="ic i-tags"></i>方块穿梭</a></li><li class="item"><a href="/html/%E7%83%9F%E8%8A%B1%E6%95%88%E6%9E%9C.html" rel="section"><i class="ic i-tags"></i>烟花效果</a></li><li class="item"><a href="/html/%E7%A2%B0%E6%92%9E%E5%B0%8F%E7%90%83.html" rel="section"><i class="ic i-tags"></i>碰撞小球</a></li><li class="item"><a href="/html/%E7%BA%B8%E9%A3%9E%E6%9C%BA.html" rel="section"><i class="ic i-tags"></i>纸飞机</a></li><li class="item"><a href="/html/%E9%AA%87%E5%AE%A2%E5%B8%9D%E5%9B%BD.html" rel="section"><i class="ic i-tags"></i>骇客帝国</a></li><li class="item"><a href="/html/%E7%8E%AB%E7%91%B0%E8%8A%B1.html" rel="section"><i class="ic i-tags"></i>玫瑰花</a></li><li class="item"><a href="/html/%E9%97%AE%E9%97%AE%E9%A2%98.html" rel="section"><i class="ic i-tags"></i>问问题</a></li></ul></li><li class="item"><a href="/html/resume/index.html" rel="section"><i class="ic i-th"></i>简历</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/learn/python/python-basic/python%E5%90%AF%E7%94%A8%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B9%B6%E8%A1%8C%E6%89%A7%E8%A1%8Csql%E6%9F%A5%E8%AF%A2/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/learn/python/python-basic/Python%E8%8E%B7%E5%8F%96%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%BB%93%E6%9E%9C%E9%9B%86/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/Python-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 Python 语言学习">Python 语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/python/Python/" title="分类于 Python">Python</a></div><span><a href="/learn/python/python-basic/python%E4%BF%AE%E6%94%B9OrderedDict%E7%9A%84key%E4%B8%94%E4%B8%8D%E6%94%B9%E5%8F%98%E6%8E%92%E5%88%97%E9%A1%BA%E5%BA%8F/" title="python修改OrderedDict的key且不改变排列顺序">python修改OrderedDict的key且不改变排列顺序</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/devops/" title="分类于 DevOPS">DevOPS</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/devops/Linux/" title="分类于 Linux">Linux</a></div><span><a href="/learn/devops/linux/%E6%8E%92%E6%9F%A5linux%E6%9C%8D%E5%8A%A1%E5%99%A8cpu%E9%AB%98%EF%BC%88%E6%9C%AA%E8%A7%A3%E5%86%B3%EF%BC%89/" title="排查linux服务器cpu高（未解决）">排查linux服务器cpu高（未解决）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/Python-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 Python 语言学习">Python 语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/python/Python/" title="分类于 Python">Python</a></div><span><a href="/learn/python/python-basic/python%20flask%20sqlalchemy%E6%85%A2%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95/" title="python flask sqlalchemy慢日志记录">python flask sqlalchemy慢日志记录</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/Server%20returns%20invalid%20timezone.%20Go%20to%20%E2%80%98Advanced%E2%80%98%20tab%20and.../" title="Server returns invalid timezone. Go to ‘Advanced‘ tab and...">Server returns invalid timezone. Go to ‘Advanced‘ tab and...</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/Python-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 Python 语言学习">Python 语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/python/Python/" title="分类于 Python">Python</a></div><span><a href="/learn/python/python-basic/python%E5%92%8Ces%E7%AE%80%E5%8D%95%E4%BA%A4%E4%BA%92/" title="python和es简单交互">python和es简单交互</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/database/" title="分类于 数据库学习">数据库学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/database/Oracle/" title="分类于 Oracle">Oracle</a></div><span><a href="/learn/database/oracle/oracle%E5%8F%96%E5%B8%A6%E6%9C%89%E5%B0%8F%E6%95%B0%E7%9A%84%E8%AE%B0%E5%BD%95/" title="oracle取带有小数的记录">oracle取带有小数的记录</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/Java-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 Java 语言学习">Java 语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/java/Java/" title="分类于 Java">Java</a></div><span><a href="/learn/java/java-basic/java%20swing%E8%BF%90%E8%A1%8Cmain%E6%96%B9%E6%B3%95%E6%97%B6%E9%81%87%E5%88%B0NPE/" title="java swing运行main方法时遇到NPE">java swing运行main方法时遇到NPE</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/Python-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 Python 语言学习">Python 语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/python/Pandas/" title="分类于 Pandas">Pandas</a></div><span><a href="/learn/python/pandas/pandas%E5%88%97%E7%AD%9B%E9%80%89/" title="pandas列筛选">pandas列筛选</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/Python-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 Python 语言学习">Python 语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/python/Python%E6%97%A5%E8%AE%B0/" title="分类于 Python 日记">Python 日记</a></div><span><a href="/learn/python/learn-python/04%20%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="(4) 字符串">(4) 字符串</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/Python-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 Python 语言学习">Python 语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/python/Python/" title="分类于 Python">Python</a></div><span><a href="/learn/python/python-basic/python%E6%A0%88%E7%9A%84%E6%B7%B1%E5%BA%A6/" title="python栈的深度">python栈的深度</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Jalen Chu @ Jalen's Blog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">2m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">29:45</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"learn/database/oracle/SQL查询优化之绑定变量/",favicon:{show:"（●´3｀●）復活成功",hide:"(´Д｀)瀏覽器崩潰啦"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?908585f2e8b845b564946752e587f4a0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/z16.model.json"},display:{position:"left",width:200,height:400},mobile:{show:!0},react:{opacity:.7}})</script></body></html>