<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="MlAWwzcGEsG8nn2V34gojElRFcnHeEgBvIS8Ek1LQ0c"><meta name="msvalidate.01" content="8BDA269F1F25AB9AB2160E377B2334C5"><link rel="alternate" type="application/rss+xml" title="Follow your heart" href="http://jalen.site/rss.xml"><link rel="alternate" type="application/atom+xml" title="Follow your heart" href="http://jalen.site/atom.xml"><link rel="alternate" type="application/json" title="Follow your heart" href="http://jalen.site/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="cache connectionpool"><link rel="canonical" href="http://jalen.site/%E7%BC%93%E5%AD%98%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%B1%A0/"><title>缓存与连接池 - Java | Jalen's Blog = Follow your heart = A happy life</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">缓存与连接池</h1><div class="meta"><span class="item" title="创建时间：2017-02-21 08:20:05"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2017-02-21T08:20:05+08:00">2017-02-21</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>6.7k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>6 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Jalen's Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://s2.loli.net/2023/01/05/pTyxE5MDSi6Y2ns.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/tpqNusmwczJ6Cgd.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/RS9yhDlPvCT4w1X.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/OxyCZ8lFfqgm5AR.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/ge1GuDaMQs5mUSC.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/01/05/CmnDWYfFqX5E7hb.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Java/" itemprop="item" rel="index" title="分类于 Java"><span itemprop="name">Java</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://jalen.site/%E7%BC%93%E5%AD%98%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%B1%A0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Jalen Chu"><meta itemprop="description" content="A happy life, ٩(●˙▿˙●)۶…⋆ฺ ->"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Follow your heart"></span><div class="body md" itemprop="articleBody"><p><em>摘要：假设有这样一个情形：客户端需要通过慢速网络链接调用同一数据。尽管数据库可以立即将结果从缓存发送到客户端，但结果必须通过线路传送到客户端，这就增加了整体执行时间。现在有一些专门的中间件框架（如 Oracle Coherence），用于在 Java、PHP 和 Ruby 中缓存数据，如果有一个在客户端级别缓存数据的通用方法，又将如何呢？</em><br><span id="more"></span><br>一。初识高速缓存和连接池<br>设想这样一种情形：你突然口渴，需要一杯水来缓解，从心情上来讲，当然是越快越好 了。通常，一杯水的产生包括从水源（井水、河水或江水、甚至海水等）抽取，通过管 道传输和设备净化，才到达你饮水的容器中。上述过程是必须的，但并不是每一杯水的 产生都必须把上述过程重复一次。你可以用一个大一点的容器（例如缸或罐等）来盛大 量的水，喝水之前分到杯子小部分中即可，你的代价只是把水从缸转移到杯子；你还可 以在大量用水（例如洗澡或洗衣服等）时，只需打开水阀，而不必临时铺设通往水源的 管道和购买净化水的设备。因为水是人们生活不可缺少的东西，每时每刻都在被大量地 使用，而且物理本质也完全相同，所以政府会铺设管道和建设水处理站，完成那些比较 困难的工作，达到资源共享的目的，而你也可针对自己的需求，用容器来盛那些具有特 定用途的水。本文将要和你讨论的高速缓存和连接池与上述特定容器和传输管道有很多 相似之处，它们都达到了同一个目的：在满足用户意愿的前提下，尽可能地共享资源， 以提高整个系统的性能。 高速缓存和连接池是数据访问中的重要技术，某些情况下的应用对访问数据库的性能有 巨大的提高，而且都得到了数据库业界的普遍支持。前者由 DBMS 厂商针对自己的数据库 实现，提供可供用户配置的方案；后者是 JDBC 的一个标准接口，由支持 J2EE 技术的应用 服务器厂商提供具体的实现，而你的 Java 程序代码无需更改。本文将向你简单介绍高速 缓存和连接池的概念和机制，并以 PointBase 数据库为例向你展示高速缓存的应用，而一个简单的连接池应用场景将向你描述应用的条件和提高的性能。[@more @] 二.Cache（高速缓存）和 Connection Pool（连接池）的概念和机制.<br>它们不是数据库独有的技术，但却得到数据库业界的普遍支持，并在其它数据存取和对 象复用领域有很多类似的应用。</p><p>1.Cache（高速缓存）<br>作为个人计算机的日常使用者，你肯定听说过这些名词：Cache（高速缓存）、Memory（ 内存）、Hard disk（硬盘）。它们都是数据存取单元，但存取速度却有很大差异，呈依 次递减的顺序。对于 CPU 来说，它可以从距离自己最近的 Cache 高速地存取数据，而不是 从内存和硬盘以低几个数量级的速度来存取数据。而 Cache 中所存储的数据，往往是 CPU 要反复存取的数据，有特定的机制（或程序）来保证 Cache 内数据的命中率（Hit Rate）<br>。因此，CPU 存取数据的速度在应用高速缓存后得到了巨大的提高。<br>对于数据库来说，厂商的做法往往是在内存中开辟相应的区域来存储可能被多次存取的 数据和可能被多次执行的语句，以使这些数据在下次被访问时不必再次提交对 DBMS 的请 求和那些语句在下次执行时不必再次编译。<br>因为将数据写入高速缓存的任务由 Cache Manager 负责，所以对用户来说高速缓存的内容 肯定是只读的。需要你做的工作很少，程序中的 SQL 语句和直接访问 DBMS 时没有分别，返 回的结果也看不出有什么差别。而数据库厂商往往会在 DB Server 的配置文件中提供与 C ache 相关的参数，通过修改它们，可针对我们的应用优化 Cache 的管理。下图是在 Win2K 中配置 MS Access 数据源的界面，在 &quot;驱动程序&quot; 部分你可设置的页超时和缓冲区大小就是 和 Cache 有关的参数。在后面的讨论中，我将展示一个更复杂的数据库，向你解释 Cache 对访问数据库性能的影响和如何寻找最优的配置方案。</p><p>2.Connection Pool（连接池）<br>池是一个很普遍的概念，和缓冲存储有机制相近的地方，都是缩减了访问的环节，但它 更注重于资源的共享.<br>方案：<br>对于访问数据库来说，建立连接的代价比较昂贵，因此，我们有必要建立 &quot;连接池&quot; 以提 高访问的性能。我们可以把连接当作对象或者设备，池中又有许多已经建立的连接，访 问本来需要与数据库的连接的地方，都改为和池相连，池临时分配连接供访问使用，结 果返回后，访问将连接交还。 （在传统的客户端 / 服务器体系结构中，用户会话和数据库连接之间是一对一的通信。但在基于 Web 的系统中，情况可能有所不同。基于 Web 的系统在本质上是 “无状态” 的 — 当您访问页面时，将建立与数据库的连接，页面下载完成后，将切断与数据库的连接。稍后，当用户再次单击页面时，将建立一个新的连接，目的达到后又将切断连接。这一过程使得没有必要维护大量的同步连接。建立连接的开销很大，因此连接池是这些应用程序的一个重要要求。在这一模式中，当页面需要数据库访问时，会从池中分配一个已经建立的连接。完成工作后，Web 会话会将连接返回池中。）<br>JDBC 1.0 标准及其扩展中没有定义连接池，而在 JDBC 2.0 标准的扩展中定义了与连接池 相关的接口。与接口对应的类由应用服务器厂商实现，你可在对服务器的管理过程中调 节某个数据库连接池的参数。<br>而要了解 Java 连接池我们先要了解数据库连接池（connection pool）的原理，Java 连接池正是数据库连接池在 Java 上的应用。—— 我们知道，对于共享资源，有一个很著名的设计模式：资源池（Resource Pool）。该模式正是为了解决资源的频繁分配﹑释放所造成的问题。为解决上述问题，可以采用数据库连接池技术。数据库连接池的基本思想就是为数据库连接建立一个 “缓冲池”。预先在缓冲池中放入一定数量的连接，当需要建立数据库连接时，只需从 “缓冲池” 中取出一个，使用完毕之后再放回去。我们可以通过设定连接池最大连接数来防止系统无尽的与数据库连接。更为重要的是我们可以通过连接池的管理机制监视数据库的连接的数量﹑使用情况，为系统开发﹑测试及性能调整提供依据。<br>C3P0 是一个开放源代码的 JDBC 连接池，它在 lib 目录中与 Hibernate 一起发布，包括了实现 jdbc3 和 jdbc2 扩展规范说明的 Connection 和 Statement 池的 DataSources 对象。（主页：<span class="exturl" data-url="aHR0cDovL3NvdXJjZWZvcmdlLm5ldC9wcm9qZWN0cy9jM3AwLyVFRiVCQyU4OQ==">http://sourceforge.net/projects/c3p0/）</span><br>BoneCP 是一个开源的快速的 JDBC 连接池。BoneCP 很小，只有四十几 K（运行时需要 log4j 和 Google Collections 的支持，这二者加起来就不小了），而相比之下 C3P0 要六百多 K。另外个人觉得 BoneCP 有个缺点是，JDBC 驱动的加载是在连接池之外的，这样在一些应用服务器的配置上就不够灵活。当然，体积小并不是 BoneCP 优秀的原因，BoneCP 到底有什么突出的地方呢，请看看性能测试报告。（主页：<span class="exturl" data-url="aHR0cDovL2pvbGJveC5jb20vJUVGJUJDJTg5">http://jolbox.com/）</span><br>DBCP （Database Connection Pool）是一个依赖 Jakarta commons-pool 对象池机制的数据库连接池，Tomcat 的数据源使用的就是 DBCP。目前 DBCP 有两个版本分别是 1.3 和 1.4。1.3 版本对应的是 JDK 1.4-1.5 和 JDBC 3，而 1.4 版本对应 JDK 1.6 和 JDBC 4。因此在选择版本的时候要看看你用的是什么 JDK 版本了，功能上倒是没有什么区别。（主页：<span class="exturl" data-url="aHR0cDovL2NvbW1vbnMuYXBhY2hlLm9yZy9kYmNwLyVFRiVCQyU4OQ==">http://commons.apache.org/dbcp/）</span><br>Proxool 是一个 Java SQL Driver 驱动程序，提供了对你选择的其它类型的驱动程序的连接池封装。可以非常简单的移植到现存的代码中。完全可配置。快速，成熟，健壮。可以透明地为你现存的 JDBC 驱动程序增加连接池功能。（主页：<span class="exturl" data-url="aHR0cDovL3Byb3hvb2wuc291cmNlZm9yZ2UubmV0LyVFRiVCQyU4OQ==">http://proxool.sourceforge.net/）</span></p><p>二.Case<br>1. 高速缓存的参数设定</p><p>在 PointBase 数据库 DB Server 的配置参数列表中，我们可以找到这几个参数：<span class="exturl" data-url="aHR0cDovL2NhY2hlLmNo">cache.ch</span><br>eckpointinterval、cache.size、SQLCaching.size 等。下表是对各个参数的描述：</p><hr><h2 id="参数名-参数描述"><a class="anchor" href="#参数名-参数描述">#</a> 参数名 参数描述</h2><h2 id="cachecheckpointinterval-检查点的时间间隔cachesize-高速缓存的最大页数素数时性能最好sqlcachingsize-高速缓存中sql语句的个数"><a class="anchor" href="#cachecheckpointinterval-检查点的时间间隔cachesize-高速缓存的最大页数素数时性能最好sqlcachingsize-高速缓存中sql语句的个数">#</a> cache.checkpointinterval 检查点的时间间隔<br>cache.size 高速缓存的最大页数（素数时，性能最好）<br>SQLCaching.size 高速缓存中 SQL 语句的个数</h2><p>对于 cache.checkpointinterval 来说，和前面 Access 界面中的页超时是一个概念，它指<br>定了页面内容更新的时间间隔，这取决于你的应用对时效性的要求程度。<br>对于 cache.size 来说，指定了页面的个数，一般应设定为符合你查询结果的需求。至于 为何是素数，我也纳闷，不过还是遵照厂商的指示吧。<br>对于 SQLCaching.size 来说，指定了存储的经过编译的 SQL 语句的个数，你可以把它设定 为 0，从而取消这个选项。<br>使用 Cache 后，性能到底有多大提高？我打开 PointBase 的 Console 通过 JDBC 驱动访问 Ser<br>ver，将 SQL 菜单下的 Timing Mode 选上，以显示各个步骤的耗费时间。执行语句是：<br>SELECT * FROM PRODUCT_TBL<br>第一次访问，总计耗时 1082 毫秒，而编译耗时 771 毫秒。<br>紧接着的第二次访问，总计耗时仅为 160 毫秒，而编译耗时为 0。<br>再接着的第三次访问，总计耗时仅为 91 毫秒，编译耗时也为 0。<br>关闭 Console，等待超过 30 秒之后，重新开启 Console，执行相同的语句，总计耗时 210 毫 秒，编译耗时为 20 毫秒。<br>自等待超过 30 秒之后，执行语句，总计耗时 101 毫秒，编译耗时为 0。<br>由此可以看出，高速缓存的应用大大提高了访问数据库的性能，而其参数的设定则要依 据前面对它们的描述来进行，需要你仔细阅读数据库的配置文档。</p><p>2. 连接池的设置和应用</p><p>我选择 IBM 公司的应用服务器平台 WebSphere 来给大家演示连接池的设置，使你面对友好<br>的 Web 界面，可以体验到非常简易的操作场景。<br>首先，我们进入 WebSphere 的管理控制台，这是一个非常漂亮的 Web 界面：<br>紧接着，我选定一个数据源：Session Persistence datasource，就可看到这个数据源<br>的属性配置了。在这儿，仅仅列举和连接池有关的属性：<br>Minimum Pool Size 池中保持的连接的最小数目；有新的请求，且没有激活连接可供用时，池中连接数将增大，到最大连接数为止<br>Maximum Pool Size 池中保持的连接的最大数目；当这个数目达到，且没有激活连接供使用时，新的请求将等待<br>Connection Timeout 当连接数达到最大值，且激活连接都在被使用时，新的请求等待时间<br>Idle Timeout 连接可在池中闲置的时间；超过将释放资源，到最小连接数为止<br>Orphan Timeout 连接在被应用控制时，可闲置的时间；超过将返回池中<br>你可以根据需要来修改这些数值，以满足你的应用需要。接下来，我们讨论一下连接池 的应用。</p><p>i).EJB 访问数据库（场景 1，使用 JDBC 1.0）</p><pre><code>import java.sql.*; 
import javax.sql.*; 
... 
public class AccountBean implements EntityBean &#123; 
... 
public Collection ejbFindByLastName(String lName) &#123; 
try &#123; 
String dbdriver = new initialContext().lookup(&quot;java:comp/env/DBD 
RIVER&quot;).toString(); 
Class.forName(dbdriver).newInstance(); 
Connection conn = null; 
conn = DriverManager.getConnection(&quot;java:comp/env/DBURL&quot;, &quot;userI 
D&quot;, &quot;password&quot;); 
... 
conn.close(); 
&#125; 
... 
&#125;
</code></pre><p>如果 EntityBean 是一个共享组件，那么每次客户请求时，都要建立和释放与数据库的连<br>接，这成为影响性能的主要问题。</p><p>2).EJB 访问数据库（场景 2，使用 JDBC 2.0）</p><pre><code>import java.sql.*; 
import javax.sql.*; 
// import here vendor specific JDBC drivers 
public ProductPK ejbCreate() &#123; 
try &#123; 
// initialize JNDI lookup parameters 
Context ctx = new InitialContext(parms); 
... 
ConnectionPoolDataSource cpds = (ConnectionPoolDataSource)ctx.lo 
okup(cpsource); 
... 
// Following parms could all come from a JNDI look-up 
cpds.setDatabaseName(&quot;PTDB&quot;); 
cpds.setUserIF(&quot;XYZ&quot;); 
... 
PooledConnection pc = cpds.getPooledConnection(); 
Connection conn = pc.getConnection(); 
... 
// do business logic 
conn.close(); 
&#125; 
... 
&#125;
</code></pre><p>EJB 组件利用 JNDI 的 lookup () 方法定位数据库的连接池资源，利用 getConnection () 方法<br>得到已经打开的数据库连接，而用 close () 来释放连接，放回池中。因此，与场景 1 相比 ，少了与数据库建立物理连接的损耗。对于原本要频繁打开和关闭物理连接的应用来说 ，通过这种建立逻辑连接并复用的方法，性能肯定能够得到大幅度提高。</p><p>四。性能问题的深远思索</p><p>性能问题并不局限于数据库的应用上，而是存在于每个软件系统中。我们希望软件系统 付出的最小，而获得的最大，因而无时无刻不在优化它们。通过《Java 程序访问数据库 的速度瓶颈问题的分析和解决》和本文，我对 Java 程序访问数据库的性能问题做了分析 ，并提供了优化 Java 程序的解决方案，希望对你有所帮助。 也许你会关心碰到类似的性能问题时应如何分析和解决，我就针对此次探讨 &quot;访问数据库 的速度瓶颈&quot; 问题的过程中碰到的难题、网友的意见和自己的体会，作一个关于 &quot; 方法论<br>&quot; 的经验总结，希望能够抛砖引玉，更好地解决类似的问题。<br>解决性能问题的几条经验<br>1、 不要让硬件的低配置成为软件正常运行的障碍，后者有升级前者的需求，请立即满 足；经常碰到这样的问题 &quot;P166+64M 的机子跑 Win2K+MySql+JBoss，能跑么？&quot; 我在回答 &quot;<br>可以&quot; 的同时只有对着屏幕发呆了。<br>2、 尽量使用商业软件，并享受良好的售后技术支持；如果你没有黑客精神，请不要使 用自由软件。<br>3、 分析好自己的问题，也许它的本质和他人的不同；没有一把钥匙可打开的任一把锁 。<br>4、 确定瓶颈环节的位置；解决了瓶颈问题，往往整个的性能问题就解决了，千万不要 抓着边缘的问题不放。<br>5、 将瓶颈环节细分为多个顺序的流程，用逐个替代的方法来试探瓶颈的核心位置；细 分问题使你都问题有更进一步的了解。<br>6、 做自己能做的和该做的事情，始终面向自己的现实问题；不要尝试那些应该由厂商 解决的问题（例如，自己写个 JDBC 驱动）。<br>7、 他人的方案只供自己参考，解决要靠自己思考；你我应用的情形不同，应用解决方 案要在理解他人的方案之后。<br>8、 观察新技术，应用新技术；它往往包含了前人对问题解决的思路，只是对你来说不 可见。<br>9、 问题得到解决后，立即罢手，并汇报结果；在现实问题得到解决后，没有必要花费精力在非核心的问题上，也许它们永远不会被碰到，不要假想问题让自己解决。上述经验为个人即兴的总结，并未有严谨的逻辑推导，仅代表我解决技术问题的思路， 供你碰到类似问题时参考。 可以提前告诉大家的是，下一篇文章我将把主题转移到 JDO 的介绍和讨论上。这个陌生的 API 已经进入 Final Draft 了，可它到底能够给数据存取带来什么好处，和 JDBC 有什么关 联的地方，《JDO（Java Data Object）的发展和介绍》将向你娓娓道来。</p><div class="tags"><a href="/tags/cache-connectionpool/" rel="tag"><i class="ic i-tag"></i> cache connectionpool</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-08-07 01:04:04" itemprop="dateModified" datetime="2024-08-07T01:04:04+08:00">2024-08-07</time> </span><span id="缓存与连接池/" class="item leancloud_visitors" data-flag-title="缓存与连接池" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/mywechatpay.png" alt="Jalen Chu 微信支付"><p>微信支付</p></div><div><img data-src="/images/myalipay.png" alt="Jalen Chu 支付宝"><p>支付宝</p></div><div><img data-src="/images/mywxgzh.png" alt="Jalen Chu 公众号"><p>公众号</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Jalen Chu <i class="ic i-at"><em>@</em></i>Follow your heart</li><li class="link"><strong>本文链接：</strong> <a href="http://jalen.site/%E7%BC%93%E5%AD%98%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%B1%A0/" title="缓存与连接池">http://jalen.site/缓存与连接池/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/learn/java/java-basic/Java%E5%86%85%E5%AD%98%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;01&#x2F;05&#x2F;EZ49WJ25iGN61nd.jpg" title="Java内存学习"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>Java内存学习</h3></a></div><div class="item right"><a href="/%E7%AC%AC%E4%B8%80%E4%B8%AAliferay-portlet%EF%BC%9Aguestbook-portlet/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;01&#x2F;05&#x2F;TVG6IvNdyF92bRe.jpg" title="第一个liferay portlet：guestbook-portlet"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Liferay</span><h3>第一个liferay portlet：guestbook-portlet</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E5%90%8D-%E5%8F%82%E6%95%B0%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">参数名 参数描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cachecheckpointinterval-%E6%A3%80%E6%9F%A5%E7%82%B9%E7%9A%84%E6%97%B6%E9%97%B4%E9%97%B4%E9%9A%94cachesize-%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E7%9A%84%E6%9C%80%E5%A4%A7%E9%A1%B5%E6%95%B0%E7%B4%A0%E6%95%B0%E6%97%B6%E6%80%A7%E8%83%BD%E6%9C%80%E5%A5%BDsqlcachingsize-%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E4%B8%ADsql%E8%AF%AD%E5%8F%A5%E7%9A%84%E4%B8%AA%E6%95%B0"><span class="toc-number">2.</span> <span class="toc-text">cache.checkpointinterval 检查点的时间间隔 cache.size 高速缓存的最大页数（素数时，性能最好） SQLCaching.size 高速缓存中 SQL 语句的个数</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/%E7%BC%93%E5%AD%98%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%B1%A0/" rel="bookmark" title="缓存与连接池">缓存与连接池</a></li><li><a href="/%E4%BB%A3%E7%A0%81%E4%B8%AD%E6%96%87%E4%BB%B6%E5%BC%95%E5%85%A5%E9%97%AE%E9%A2%98/" rel="bookmark" title="代码中文件引入问题">代码中文件引入问题</a></li><li><a href="/log4j%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8/" rel="bookmark" title="log4j的设置与应用">log4j的设置与应用</a></li><li><a href="/JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0/" rel="bookmark" title="jdk动态代理">jdk动态代理</a></li><li><a href="/cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" rel="bookmark" title="cglib动态代理">cglib动态代理</a></li><li><a href="/%E5%88%9B%E5%BB%BAlist%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F/" rel="bookmark" title="创建list的两种方式">创建list的两种方式</a></li><li><a href="/learn/algorithm/practise/%E4%B8%A4%E9%81%93String%E7%B1%BB%E5%9E%8B%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="bookmark" title="两道String类型面试题">两道String类型面试题</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Jalen Chu" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Jalen Chu</p><div class="description" itemprop="description">٩(●˙▿˙●)۶…⋆ฺ -></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">700</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">100</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">210</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1NpbmNlcmVseVVuaXF1ZQ==" title="https:&#x2F;&#x2F;github.com&#x2F;SincerelyUnique"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9qYWxlbl9jaHU=" title="https:&#x2F;&#x2F;twitter.com&#x2F;jalen_chu"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9qYWxlbmNodQ==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;jalenchu"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvbXkvbS9tdXNpYy9wbGF5bGlzdD9pZD0yMDMxOTczNDY0" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;my&#x2F;m&#x2F;music&#x2F;playlist?id&#x3D;2031973464"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20veW91cm5hbWU=" title="https:&#x2F;&#x2F;weibo.com&#x2F;yourname"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS9KYWxlbkNodQ==" title="https:&#x2F;&#x2F;about.me&#x2F;JalenChu"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjExNTIzNTc0NzlAcXEuY29t" title="mailto:1152357479@qq.com"><i class="ic i-envelope"></i></span> <span class="exturl item facebook" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2phbGVuLmNodS43OTIv" title="https:&#x2F;&#x2F;www.facebook.com&#x2F;jalen.chu.792&#x2F;"><i class="ic i-facebook"></i></span> <span class="exturl item stackoverflow" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy8xMTExNzYxOC9qYWxlbi1jaHU=" title="https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;11117618&#x2F;jalen-chu"><i class="ic i-stack-overflow"></i></span> <span class="exturl item youtube" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vY2hhbm5lbC9VQ3FQRnVtUGpGMWVRdVJrdWp0NUR1YWc=" title="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCqPFumPjF1eQuRkujt5Duag"><i class="ic i-youtube"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/webstack/" rel="section"><i class="ic i-user"></i>网址</a></li><li class="item dropdown"><a href="/html/%E5%9C%88%E5%B0%8F%E7%8C%AB.html" rel="section"><i class="ic i-tags"></i>玩耍</a><ul class="submenu"><li class="item"><a href="/html/%E5%9C%88%E5%B0%8F%E7%8C%AB.html" rel="section"><i class="ic i-tags"></i>圈小猫</a></li><li class="item"><a href="/html/%E6%92%95%E6%B8%94%E7%BD%91.html" rel="section"><i class="ic i-tags"></i>撕渔网</a></li><li class="item"><a href="/html/%E5%BD%A9%E8%99%B9%E9%9B%A8.html" rel="section"><i class="ic i-tags"></i>彩虹雨</a></li><li class="item"><a href="/html/%E6%96%B9%E5%9D%97%E7%A9%BF%E6%A2%AD.html" rel="section"><i class="ic i-tags"></i>方块穿梭</a></li><li class="item"><a href="/html/%E7%83%9F%E8%8A%B1%E6%95%88%E6%9E%9C.html" rel="section"><i class="ic i-tags"></i>烟花效果</a></li><li class="item"><a href="/html/%E7%A2%B0%E6%92%9E%E5%B0%8F%E7%90%83.html" rel="section"><i class="ic i-tags"></i>碰撞小球</a></li><li class="item"><a href="/html/%E7%BA%B8%E9%A3%9E%E6%9C%BA.html" rel="section"><i class="ic i-tags"></i>纸飞机</a></li><li class="item"><a href="/html/%E9%AA%87%E5%AE%A2%E5%B8%9D%E5%9B%BD.html" rel="section"><i class="ic i-tags"></i>骇客帝国</a></li><li class="item"><a href="/html/%E7%8E%AB%E7%91%B0%E8%8A%B1.html" rel="section"><i class="ic i-tags"></i>玫瑰花</a></li><li class="item"><a href="/html/%E9%97%AE%E9%97%AE%E9%A2%98.html" rel="section"><i class="ic i-tags"></i>问问题</a></li></ul></li><li class="item"><a href="/html/resume/index.html" rel="section"><i class="ic i-th"></i>简历</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/learn/java/java-basic/Java%E5%86%85%E5%AD%98%E5%AD%A6%E4%B9%A0/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/%E7%AC%AC%E4%B8%80%E4%B8%AAliferay-portlet%EF%BC%9Aguestbook-portlet/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/Python-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 Python 语言学习">Python 语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/python/Flask/" title="分类于 Flask">Flask</a></div><span><a href="/learn/python/flask/flask%20sqlalchemy%E5%B5%8C%E5%A5%97%E4%BA%8B%E5%8A%A1/" title="flask sqlalchemy嵌套事务">flask sqlalchemy嵌套事务</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/illegal%20to%20have%20multiple%20occurrences%20of%20'contentType'%20with%20different%20values/" title="illegal to have multiple occurrences of &#39;contentType&#39; with different values">illegal to have multiple occurrences of 'contentType' with different values</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/Go-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 Go 语言学习">Go 语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/go/Gin%E6%A1%86%E6%9E%B6/" title="分类于 Gin 框架">Gin 框架</a></div><span><a href="/learn/go/gin/%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8Gin%E6%A1%86%E6%9E%B6/" title="简单使用Gin框架">简单使用Gin框架</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Java/" title="分类于 Java">Java</a></div><span><a href="/log4j%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8/" title="log4j的设置与应用">log4j的设置与应用</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/principle/" title="分类于 设计模式">设计模式</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/principle/HeadFirst%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="分类于 HeadFirst 设计模式">HeadFirst 设计模式</a></div><span><a href="/learn/principle/head-first-design-pattern/%E5%8D%95%E4%BB%B6%EF%BC%88%E4%BE%8B%EF%BC%89%E6%A8%A1%E5%BC%8F/" title="单件（例）模式">单件（例）模式</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/%E6%89%A7%E8%A1%8CIterator.remove()%E6%96%B9%E6%B3%95%E6%97%B6%E5%87%BA%E7%8E%B0Java.lang.IllegalStateException%E5%BC%82%E5%B8%B8/" title="执行Iterator.remove()方法时出现Java.lang.IllegalStateException异常">执行Iterator.remove()方法时出现Java.lang.IllegalStateException异常</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/devops/" title="分类于 DevOPS">DevOPS</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/devops/Linux/" title="分类于 Linux">Linux</a></div><span><a href="/learn/devops/linux/%E6%B7%BB%E5%8A%A0linux%20systemd%E6%9C%8D%E5%8A%A1/" title="添加linux systemd服务">添加linux systemd服务</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learn/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/frontent/" title="分类于 前端知识学习">前端知识学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learn/frontent/JavaScript/" title="分类于 JavaScript">JavaScript</a></div><span><a href="/learn/frontent/js/JS%E6%AD%A3%E5%88%99%E6%A0%A1%E9%AA%8CMAC%E5%9C%B0%E5%9D%80/" title="JS正则校验MAC地址">JS正则校验MAC地址</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/Working%20outside%20of%20application%20context/" title="Working outside of application context">Working outside of application context</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/windows%E9%85%8D%E7%BD%AErvm%E4%B8%8Eruby%E5%B9%B6%E8%BF%90%E8%A1%8Crails%E9%A1%B9%E7%9B%AE/" title="windows配置rvm与ruby并运行rails项目(WSL)">windows配置rvm与ruby并运行rails项目(WSL)</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Jalen Chu @ Jalen's Blog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">2m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">29:45</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"缓存与连接池/",favicon:{show:"（●´3｀●）復活成功",hide:"(´Д｀)瀏覽器崩潰啦"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?908585f2e8b845b564946752e587f4a0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/z16.model.json"},display:{position:"left",width:200,height:400},mobile:{show:!0},react:{opacity:.7}})</script></body></html>