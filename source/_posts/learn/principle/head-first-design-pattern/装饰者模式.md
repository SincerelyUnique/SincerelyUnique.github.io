---
title: è£…é¥°è€…æ¨¡å¼
date: 2018-01-16 10:58:04
tags:
- principle
- design pattern
categories:
- [å­¦ä¹ , è®¾è®¡æ¨¡å¼, HeadFirstè®¾è®¡æ¨¡å¼]
valine:
  placeholder: "1. æé—®å‰è¯·å…ˆä»”ç»†é˜…è¯»æœ¬æ–‡æ¡£âš¡\n2. é¡µé¢æ˜¾ç¤ºé—®é¢˜ğŸ’¥ï¼Œè¯·æä¾›æ§åˆ¶å°æˆªå›¾ğŸ“¸æˆ–è€…æ‚¨çš„æµ‹è¯•ç½‘å€\n3. å…¶ä»–ä»»ä½•æŠ¥é”™ğŸ’£ï¼Œè¯·æä¾›è¯¦ç»†æè¿°å’Œæˆªå›¾ğŸ“¸ï¼Œç¥é£Ÿç”¨æ„‰å¿«ğŸ’ª"
---

`Head Firstç¬¬ä¸‰ç« `

# è£…é¥°è€…æ¨¡å¼

ä½œç”¨ï¼šâ€œç»™çˆ±ç”¨ç»§æ‰¿çš„äººä¸€ä¸ªå…¨æ–°çš„è®¾è®¡çœ¼ç•Œâ€ï¼Œå³è§£å†³ç»§æ‰¿æ»¥ç”¨ï¼Œèƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹ä»»ä½•åº•å±‚ä»£ç çš„æƒ…å†µä¸‹ï¼Œç»™ä½ çš„ï¼ˆæˆ–åˆ«äººçš„ï¼‰å¯¹è±¡èµ‹äºˆæ–°çš„èŒè´£ã€‚

è§£å†³é—®é¢˜ï¼šç±»æ•°é‡çˆ†ç‚¸ï¼ˆæŒ‡ç»§æ‰¿ï¼‰ã€è®¾è®¡æ­»æ¿ã€åŸºç±»åŠ å…¥æ–°åŠŸèƒ½å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰å­ç±»ã€‚

# ç¬¦åˆè®¾è®¡åŸåˆ™ï¼šå¼€æ”¾-å…³é—­åŸåˆ™

å®šä¹‰ï¼šç±»åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å³åœ¨ä¸ä¿®æ”¹ç°æœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå…è®¸ç±»çš„æ‰©å±•ã€‚

è¯´æ˜ï¼šè¿‡åº¦ä½¿ç”¨å¼€æ”¾-å…³é—­åŸåˆ™ï¼ˆé€‰æ‹©éœ€è¦è¢«æ‰©å±•çš„ä»£ç éƒ¨åˆ†æ—¶ï¼‰è¦å°å¿ƒï¼Œæ¯ä¸ªåœ°æ–¹éƒ½ä½¿ç”¨è¯¥åŸåˆ™æ˜¯ä¸€ç§æµªè´¹ï¼Œå› ä¸ºè¯¥åŸåˆ™é€šå¸¸ä¼šå¼•å…¥æ–°çš„æŠ½è±¡å±‚æ¬¡ï¼Œå¯¼è‡´ä»£ç å˜å¾—å¤æ‚è€Œéš¾ä»¥ç†è§£ã€‚

# è§£é‡Š

ï¼ˆ1ï¼‰è£…é¥°è€…å’Œè¢«è£…é¥°è€…å¯¹è±¡æœ‰ç›¸åŒçš„è¶…ç±»å‹ï¼Œé€šå¸¸è£…é¥°è€…æ¨¡å¼é‡‡ç”¨çš„æ˜¯æŠ½è±¡ç±»ï¼›

ï¼ˆ2ï¼‰ä½ å¯ä»¥ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªè£…é¥°è€…åŒ…è£…ä¸€ä¸ªå¯¹è±¡ï¼›

ï¼ˆ3ï¼‰æ—¢ç„¶è£…é¥°è€…å’Œè¢«è£…é¥°å¯¹è±¡æœ‰ç›¸åŒçš„è¶…ç±»å‹ï¼Œæ‰€ä»¥åœ¨ä»»ä½•éœ€è¦åŸå§‹å¯¹è±¡ï¼ˆè¢«åŒ…è£…çš„ï¼‰åœºåˆï¼Œå¯ä»¥ç”¨è£…é¥°è¿‡çš„å¯¹è±¡ä»£æ›¿å®ƒï¼›

ï¼ˆ4ï¼‰è£…é¥°è€…å¯ä»¥åœ¨æ‰€å§”æ‰˜è¢«è£…é¥°è€…çš„è¡Œä¸ºä¹‹å‰/æˆ–ä¹‹åï¼ŒåŠ ä¸Šè‡ªå·±çš„è¡Œä¸ºï¼Œä»¥è¾¾åˆ°ç‰¹å®šçš„ç›®çš„ï¼›

ï¼ˆ5ï¼‰å¯¹è±¡å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¢«è£…é¥°ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ã€ä¸é™é‡åœ°ç”¨ä½ å–œæ¬¢çš„è£…é¥°è€…æ¥è£…é¥°å¯¹è±¡ï¼›

# è£…é¥°è€…æ¨¡å¼å®šä¹‰åŠç»“æ„å›¾

è£…é¥°è€…æ¨¡å¼åŠ¨æ€åœ°å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šã€‚è‹¥è¦æ‰©å±•åŠŸèƒ½ï¼Œè£…é¥°è€…æä¾›äº†æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§çš„æ›¿ä»£æ–¹æ¡ˆã€‚

![](../../../../images/zhuangshi01.png)

# ä¾‹å­

ï¼ˆ1ï¼‰å°†è°ƒæ–™ä½œä¸ºè£…é¥°è€…ï¼Œå°†é¥®æ–™ä½œä¸ºè¢«è£…é¥°å¯¹è±¡ï¼›

ï¼ˆ2ï¼‰ä¸€ç§é¥®æ–™å¯ä»¥å¡«åŠ å¤šç§è°ƒæ–™ï¼Œå³å¯ä»¥è¢«å¤šç§è°ƒæ–™è£…é¥°ï¼›

ï¼ˆ3ï¼‰ä»–ä»¬æ‹¥æœ‰å…±åŒçš„è¶…ç±»ï¼Œå³ä»–ä»¬å¿…é¡»æ˜¯ä¸€æ ·çš„ç±»å‹ï¼Œè¿™æ ·å¥½åˆ©ç”¨ç»§æ‰¿è¾¾åˆ°â€œç±»å‹åŒ¹é…â€ï¼Œæ³¨æ„è¿™é‡Œä¸æ˜¯åˆ©ç”¨ç»§æ‰¿è·å¾—â€œè¡Œä¸ºâ€ï¼›

![](../../../../images/zhuangshi02.png)

ä»£ç ï¼š

å®šä¹‰æŠ½è±¡ç»„ä»¶-é¥®æ–™ç±»ï¼š

```java
package com.example.test;
 
/**
 * <p>
 * <code>Beverage</code>
 * </p>
 * Description:é¥®æ–™åŸºç±»
 * (1)Beverageæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼šgetDescription()åŠcost()ï¼›
 * (2)getDescription()å·²ç»åœ¨æ­¤å®ç°äº†ï¼Œä½†æ˜¯cost()å¿…é¡»åœ¨å­ç±»ä¸­å®ç°ï¼›
 *
 * @author Mcchu
 * @date 2018/1/16 9:24
 */
public abstract class Beverage {
    String description = "Unknown Beverage";
 
    public String getDescription() {
        return description;
    }
    
    public abstract double cost();
}
```

å®šä¹‰è°ƒæ–™æŠ½è±¡ç±»ï¼Œä¹Ÿå°±æ˜¯è£…é¥°è€…ç±»ï¼š

```java
package com.example.test;
 
/**
 * <p>
 * <code>Condiment</code>
 * </p>
 * Description:è°ƒæ–™è£…é¥°è€…ç±»
 * (1)é¦–å…ˆï¼Œå¿…é¡»è®©Condiment Decoratorèƒ½å¤Ÿå–ä»£Beverageï¼Œæ‰€ä»¥å°†Condiment Decoratoræ‰©å±•è‡ªBeverageç±»ï¼›
 * (2)æ‰€æœ‰çš„è°ƒæ–™è£…é¥°è€…éƒ½å¿…é¡»é‡æ–°å®ç°getDescription()æ–¹æ³•ï¼›
 *
 * @author Mcchu
 * @date 2018/1/16 9:29
 */
public abstract class CondimentDecorator extends Beverage{
 
    public abstract String getDescription();
}
```

å®šä¹‰å…·ä½“ç»„ä»¶-é¥®æ–™ç±»ï¼š 

æµ“ç¼©å’–å•¡

```java
package com.example.test;
 
/**
 * <p>
 * <code>Espresso</code>
 * </p>
 * Description:å…·ä½“é¥®æ–™-æµ“ç¼©å’–å•¡
 * (1)Espressoç±»æ‰©å±•è‡ªBeverageç±»ï¼Œå› ä¸ºEspressoæ˜¯é¥®æ–™çš„ä¸€ç§
 * (2)æ„é€ å™¨æ˜¯ä¸ºäº†è®¾ç½®é¥®æ–™çš„æè¿°ï¼Œdescriptionå®ä¾‹å˜é‡ç»§æ‰¿è‡ªBeverage
 * (3)cost()æ–¹æ³•ä¸éœ€è¦ç®¡è°ƒæ–™çš„ä»·é’±ï¼Œç›´æ¥æŠŠEspressoçš„ä»·æ ¼è¿”å›
 * 
 * @author Mcchu
 * @date 2018/1/16 9:36
 */
public class Espresso extends Beverage {
    
    public Espresso(){
        description = "Espresso";
    }
    
    @Override
    public double cost() {
        return 1.99;
    }
}
```

æ··åˆå’–å•¡

```java
package com.example.test;
 
/**
 * <p>
 * <code>HouseBlend</code>
 * </p>
 * Description:å…·ä½“é¥®æ–™-æ··åˆå’–å•¡
 * (1)è¿™é‡Œåšæ³•å’Œæµ“ç¼©å’–å•¡ç±»ç›¸ä¼¼
 *
 * @author Mcchu
 * @date 2018/1/16 9:41
 */
public class HouseBlend extends Beverage {
 
    public HouseBlend(){
        description = "House Blend Coffee";
    }
 
    @Override
    public double cost() {
        return .89;
    }
}
```

ä¸‹é¢æˆ‘ä»¬å®šä¹‰å…·ä½“çš„è£…é¥°è€…ç±»ï¼š

```java
package com.example.test;
 
/**
 * <p>
 * <code>Mocha</code>
 * </p>
 * Description:
 * (1)å…·ä½“è£…é¥°è€…ç±»-æ‘©å¡è°ƒæ–™
 * (2)æ‘©å¡è°ƒæ–™æ˜¯ä¸€ä¸ªè£…é¥°è€…ç±»ï¼Œæ‰©å±•è‡ªCondimentDecoratorï¼Œè€ŒCondimentDecoratoræ‰©å±•è‡ªBeverageç±»
 *
 * @author Mcchu
 * @date 2018/1/16 9:46
 */
public class Mocha extends CondimentDecorator {
 
    /**
     * ç”¨ä¸€ä¸ªå®ä¾‹å˜é‡è®°å½•é¥®æ–™ï¼Œä¹Ÿå°±æ˜¯è¢«è£…é¥°è€…
     */
    Beverage beverage;
 
    /**
     * æƒ³åŠæ³•è®©è¢«è£…é¥°è€…ï¼ˆé¥®æ–™ï¼‰è¢«è®°å½•åˆ°å®ä¾‹å˜é‡ä¸­
     * è¿™é‡ŒæŠŠé¥®æ–™å½“ä½œæ„é€ å™¨çš„å‚æ•°ï¼Œå†ç”±æ„é€ å™¨å°†æ­¤é¥®æ–™è®°å½•åœ¨å®ä¾‹å˜é‡ä¸­
     * 
     * @param beverage è¢«è£…é¥°è€…
     */
    public Mocha( Beverage beverage ){
        this.beverage = beverage;
    }
 
    /**
     * æˆ‘ä»¬å¸Œæœ›å™è¿°ä¸åªæ˜¯æè¿°é¥®æ–™ï¼Œè€Œæ˜¯å®Œæ•´çš„è¿è°ƒæ–™ä¹Ÿæè¿°å‡ºæ¥
     * è¿™é‡Œé¦–å…ˆåˆ©ç”¨å§”æ‰˜çš„åšæ³•ï¼Œå¾—åˆ°ä¸€ä¸ªé¥®æ–™çš„å™è¿°ï¼Œç„¶ååœ¨å…¶ååŠ ä¸Šé™„åŠ çš„å™è¿°
     * 
     * @return é¥®æ–™æè¿°+é™„åŠ çš„è°ƒæ–™æè¿°
     */
    @Override
    public String getDescription() {
        return beverage.getDescription() + ", Mocha";
    }
 
    /**
     * è®¡ç®—å¸¦æ‘©å¡è°ƒæ–™çš„é¥®æ–™ä»·é’±
     * è¿™é‡Œå…ˆæŠŠè°ƒç”¨å§”æ‰˜ç»™è¢«è£…é¥°å¯¹è±¡ï¼Œä»¥è®¡ç®—ä»·é’±ï¼Œç„¶ååŠ ä¸Šæ‘©å¡çš„ä»·é’±ï¼Œå¾—åˆ°æœ€åç»“æœ
     * 
     * @return æ‘©å¡è°ƒæ–™ä»·é’±+è¢«è£…é¥°å¯¹è±¡çš„ä»·é’±
     */
    @Override
    public double cost() {
        return .20 + beverage.cost();
    }
}
```

åŒç†ï¼Œå®šä¹‰å¥¶æ³¡è°ƒæ–™è£…é¥°è€…ç±»ï¼š

```java
package com.example.test;
 
/**
 * <p>
 * <code>Whip</code>
 * </p>
 * Description:è£…é¥°è€…ç±»-å¥¶æ²¹è°ƒæ–™
 *
 * @author Mcchu
 * @date 2018/1/16 9:46
 */
public class Whip extends CondimentDecorator {
 
    /**
     * ç”¨ä¸€ä¸ªå®ä¾‹å˜é‡è®°å½•é¥®æ–™ï¼Œä¹Ÿå°±æ˜¯è¢«è£…é¥°è€…
     */
    Beverage beverage;
 
    /**
     * æƒ³åŠæ³•è®©è¢«è£…é¥°è€…ï¼ˆé¥®æ–™ï¼‰è¢«è®°å½•åˆ°å®ä¾‹å˜é‡ä¸­
     * è¿™é‡ŒæŠŠé¥®æ–™å½“ä½œæ„é€ å™¨çš„å‚æ•°ï¼Œå†ç”±æ„é€ å™¨å°†æ­¤é¥®æ–™è®°å½•åœ¨å®ä¾‹å˜é‡ä¸­
     *
     * @param beverage è¢«è£…é¥°è€…
     */
    public Whip(Beverage beverage ){
        this.beverage = beverage;
    }
 
    /**
     * æˆ‘ä»¬å¸Œæœ›å™è¿°ä¸åªæ˜¯æè¿°é¥®æ–™ï¼Œè€Œæ˜¯å®Œæ•´çš„è¿è°ƒæ–™ä¹Ÿæè¿°å‡ºæ¥
     * è¿™é‡Œé¦–å…ˆåˆ©ç”¨å§”æ‰˜çš„åšæ³•ï¼Œå¾—åˆ°ä¸€ä¸ªé¥®æ–™çš„å™è¿°ï¼Œç„¶ååœ¨å…¶ååŠ ä¸Šé™„åŠ çš„å™è¿°
     *
     * @return é¥®æ–™æè¿°+é™„åŠ çš„è°ƒæ–™æè¿°
     */
    @Override
    public String getDescription() {
        return beverage.getDescription() + ", Whip";
    }
 
    /**
     * è®¡ç®—å¸¦å¥¶æ³¡è°ƒæ–™çš„é¥®æ–™ä»·é’±
     * è¿™é‡Œå…ˆæŠŠè°ƒç”¨å§”æ‰˜ç»™è¢«è£…é¥°å¯¹è±¡ï¼Œä»¥è®¡ç®—ä»·é’±ï¼Œç„¶ååŠ ä¸Šå¥¶æ³¡çš„ä»·é’±ï¼Œå¾—åˆ°æœ€åç»“æœ
     *
     * @return å¥¶æ³¡è°ƒæ–™ä»·é’±+è¢«è£…é¥°å¯¹è±¡çš„ä»·é’±
     */
    @Override
    public double cost() {
        return .30 + beverage.cost();
    }
}
```

å†å®šä¹‰è±†æµ†è£…é¥°è€…ç±»ï¼š

```java
package com.example.test;
 
/**
 * <p>
 * <code>Soy</code>
 * </p>
 * Description:è£…é¥°è€…ç±»-è±†æµ†
 *
 * @author Mcchu
 * @date 2018/1/16 9:46
 */
public class Soy extends CondimentDecorator {
 
    /**
     * ç”¨ä¸€ä¸ªå®ä¾‹å˜é‡è®°å½•é¥®æ–™ï¼Œä¹Ÿå°±æ˜¯è¢«è£…é¥°è€…
     */
    Beverage beverage;
 
    /**
     * æƒ³åŠæ³•è®©è¢«è£…é¥°è€…ï¼ˆé¥®æ–™ï¼‰è¢«è®°å½•åˆ°å®ä¾‹å˜é‡ä¸­
     * è¿™é‡ŒæŠŠé¥®æ–™å½“ä½œæ„é€ å™¨çš„å‚æ•°ï¼Œå†ç”±æ„é€ å™¨å°†æ­¤é¥®æ–™è®°å½•åœ¨å®ä¾‹å˜é‡ä¸­
     *
     * @param beverage è¢«è£…é¥°è€…
     */
    public Soy(Beverage beverage ){
        this.beverage = beverage;
    }
 
    /**
     * æˆ‘ä»¬å¸Œæœ›å™è¿°ä¸åªæ˜¯æè¿°é¥®æ–™ï¼Œè€Œæ˜¯å®Œæ•´çš„è¿è°ƒæ–™ä¹Ÿæè¿°å‡ºæ¥
     * è¿™é‡Œé¦–å…ˆåˆ©ç”¨å§”æ‰˜çš„åšæ³•ï¼Œå¾—åˆ°ä¸€ä¸ªé¥®æ–™çš„å™è¿°ï¼Œç„¶ååœ¨å…¶ååŠ ä¸Šé™„åŠ çš„å™è¿°
     *
     * @return é¥®æ–™æè¿°+é™„åŠ çš„è°ƒæ–™æè¿°
     */
    @Override
    public String getDescription() {
        return beverage.getDescription() + ", Soy";
    }
 
    /**
     * è®¡ç®—å¸¦è±†æµ†è°ƒæ–™çš„é¥®æ–™ä»·é’±
     * è¿™é‡Œå…ˆæŠŠè°ƒç”¨å§”æ‰˜ç»™è¢«è£…é¥°å¯¹è±¡ï¼Œä»¥è®¡ç®—ä»·é’±ï¼Œç„¶ååŠ ä¸Šè±†æµ†çš„ä»·é’±ï¼Œå¾—åˆ°æœ€åç»“æœ
     *
     * @return è±†æµ†è°ƒæ–™ä»·é’±+è¢«è£…é¥°å¯¹è±¡çš„ä»·é’±
     */
    @Override
    public double cost() {
        return .40 + beverage.cost();
    }
}
```

è‡³æ­¤ï¼Œé¥®æ–™åŸºç±»ï¼Œè£…é¥°è€…åŸºç±»ï¼Œå…·ä½“é¥®æ–™ç±»ï¼ˆè¢«è£…é¥°ï¼‰ï¼Œå…·ä½“è°ƒæ–™ç±»ï¼ˆè£…é¥°è€…ï¼‰å·²å®šä¹‰å®Œæ¯•ï¼Œå¦‚æœå¼•å…¥äº†ä¸€ç§æ–°çš„é¥®æ–™æˆ–è°ƒæ–™ï¼Œåªéœ€å¢åŠ å…·ä½“çš„ç±»å³å¯ï¼Œä¸‹é¢æ˜¯æµ‹è¯•ï¼š

```java
package com.example.test;
 
/**
 * <p>
 * <code>StarbuzzCoffee</code>
 * </p>
 * Description: æµ‹è¯•ç±»
 *
 * @author Mcchu
 * @date 2018/1/16 10:06
 */
public class StarbuzzCoffee {
 
    public static void main(String[] args) {
        // ä¸€æ¯Espressoï¼Œä¸åŠ è°ƒæ–™ï¼Œæ‰“å°æè¿°ä¸ä»·é’±
        Beverage beverage = new Espresso();
        System.out.println( "æè¿°ï¼š"+beverage.getDescription() );
        System.out.println( "ä»·é’±ï¼š"+ "$" + beverage.cost() );
 
        // ä¸€æ¯HouseBlendï¼ŒåŠ ä¸¤ä»½æ‘©å¡ï¼ŒåŠ ä¸€ä»½å¥¶æ³¡ï¼Œå†åŠ ä¸€ä»½è±†æµ†ï¼Œæ‰“å°æè¿°ä¸ä»·é’±
        Beverage beverage2 = new HouseBlend();
        beverage2 = new Mocha(beverage2);   //ç”¨Mochaè£…é¥°HouseBlend
        beverage2 = new Mocha(beverage2);  //å†ç”¨Mochaè£…é¥°HouseBlend
        beverage2 = new Whip(beverage2);  //ç”¨å¥¶æ³¡Whipè£…é¥°HouseBlend
        beverage2 = new Soy(beverage2);  //ç”¨è±†æµ†Soyè£…é¥°HouseBlend
        System.out.println( "æè¿°ï¼š"+beverage2.getDescription() );
        System.out.println( "ä»·é’±ï¼š"+ "$" + beverage2.cost() );
    }
}
```

# JDKä¸­çš„è£…é¥°è€…ï¼š JAVA I/O

æˆ‘ä»¬çœ‹ä¸€ä¸ªç±»å›¾å°±æ˜ç™½äº†ï¼Œå¾ˆåƒä¸Šé¢æˆ‘ä»¬çš„ä¾‹å­

![](../../../../images/zhuangshi03.png)

ä¸Šé¢æ˜¯JDKå°è£…çš„è¾“å…¥æµï¼ˆinput...ï¼‰è®¾è®¡ï¼Œå…¶å®è¾“å‡ºæµï¼ˆoutput...ï¼‰çš„è®¾è®¡ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œè¿˜æœ‰Writeræµï¼ˆä½œä¸ºåŸºäºå­—ç¬¦æ•°æ®çš„è¾“å…¥è¾“å‡ºï¼‰ç­‰ã€‚

# è£…é¥°è€…æ¨¡å¼å¼•å‡ºçš„ç¼ºç‚¹

åˆ©ç”¨è£…é¥°è€…æ¨¡å¼ï¼Œå¸¸å¸¸é€ æˆè®¾è®¡ä¸­æœ‰å¤§é‡çš„å°ç±»ï¼Œæ•°é‡å®åœ¨å¤ªå¤šï¼Œå¯èƒ½ä¼šé€ æˆä½¿ç”¨æ­¤APIçš„ç¨‹åºå‘˜çš„å›°æ‰°ã€‚

# æ¨¡æ‹ŸJDKä¸­JAVA I/Oçš„è®¾è®¡ï¼Œè‡ªå·±ç¼–å†™ä¸€ä¸ªè£…é¥°è€…ï¼ŒæŠŠè¾“å…¥çš„æ‰€æœ‰å¤§å†™å­—ç¬¦è½¬å°å†™

```java
package com.example.test;
 
import java.io.FilterInputStream;
import java.io.IOException;
import java.io.InputStream;
 
/**
 * <p>
 * <code>LowerCaseInputStream</code>
 * </p>
 * Description: è‡ªå®šä¹‰java i/oè£…é¥°è€…
 * æ‰©å±•FilterInputStreamç±»ï¼Œè¿™æ˜¯æ‰€æœ‰InputStreamçš„æŠ½è±¡è£…é¥°è€…
 *
 * @author Mcchu
 * @date 2018/1/16 10:37
 */
public class LowerCaseInputStream extends FilterInputStream {
 
    /**
     * Creates a <code>FilterInputStream</code>
     * by assigning the  argument <code>in</code>
     * to the field <code>this.in</code> so as
     * to remember it for later use.
     *
     * @param in the underlying input stream, or <code>null</code> if
     *           this instance is to be created without an underlying stream.
     */
    protected LowerCaseInputStream(InputStream in) {
        super(in);
    }
 
    /**
     * é’ˆå¯¹å­—èŠ‚ï¼šå°†å¤§å†™è½¬æˆå°å†™
     *
     * @return å°å†™å­—èŠ‚
     * @throws IOException IOå¼‚å¸¸
     */
    public int read() throws IOException {
        int c = super.read();
        return ( c == -1 ? c : Character.toLowerCase( (char) c ) );
    }
 
    /**
     * é’ˆå¯¹å­—èŠ‚æ•°ç»„ï¼šå°†å¤§å†™è½¬æˆå°å†™
     *
     * @param b ä¼ å…¥å­—èŠ‚æ•°ç»„ï¼ˆthe buffer into which the data is readï¼‰
     * @param offset èµ·å§‹ä½ç§»ï¼ˆthe start offset in the destination arrayï¼‰
     * @param len é•¿åº¦ï¼ˆthe maximum number of bytes readï¼‰
     * @return å°å†™å­—èŠ‚æ•°ç»„ï¼ˆthe total number of bytes read into the bufferï¼‰
     * @throws IOException IOå¼‚å¸¸
     */
    public int read(byte[] b, int offset, int len) throws IOException{
        int result = super.read( b, offset, len );
        for ( int i=offset; i<offset+result; i++ ){
            b[i] = (byte)Character.toLowerCase( (char)b[i] );
        }
        return result;
    }
}
```

æµ‹è¯•

```java
package com.example.test;
 
import java.io.BufferedInputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
 
/**
 * <p>
 * <code>TestLowerCaseInputStream</code>
 * </p>
 * Description: æµ‹è¯•æˆ‘ä»¬è‡ªå®šä¹‰çš„LowerCaseInputStream
 *
 * @author Mcchu
 * @date 2018/1/16 10:47
 */
public class TestLowerCaseInputStream {
 
    public static void main(String[] args) throws IOException{
        int c;
        
        try {
            // è®¾ç½®FileInputStream
            FileInputStream fis = new FileInputStream("text.txt");
            
            // å…ˆç”¨BufferedInputStreamè£…é¥°å¥¹ï¼Œå†ç”¨æˆ‘ä»¬æ–°å®šä¹‰çš„LowerCaseInputStreamè£…é¥°å¥¹
            InputStream in = new LowerCaseInputStream( new BufferedInputStream( fis ));
            
            while( ( c = in.read() ) >= 0 ){
                System.out.println( (char)c );
            }
            
            in.close();
        }catch (IOException e){
            e.printStackTrace();
        }
    }
}
```

