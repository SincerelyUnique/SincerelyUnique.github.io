---
title: (3) 类型
date: 2021-12-23 05:42:23
categories:
- [学习, Python学习, 学习Python]
tags: Python
---

python有五个标准的数据类型：String（字符串）、Numbers（数字）、List（列表）、Tuple（元组）、Dictionary（字典），每种类型都有自己的用途，其中数字、字符串、元组是不可变的（immutable），列表、字典是可变的，对不可变类型的变量重新赋值，实际上是重新创建一个不可变类型的对象，并将原来的变量重新指向新创建的对象（如果没有其他变量引用原有对象的话（即引用计数为0），原有对象就会被回收）。并且注意，Python是弱类型语言，所以程序中的变量赋值时不需要显式声明类型。当你创建一个类型变量后，解释器会通过你所定义的变量的值分析出其类型，然后再去做相应的后续操作。

变量是存储在内存中的值，这就意味着在创建变量时会在内存中开辟一个空间。基于变量的数据类型，解释器会分配指定内存，并决定什么数据可以被存储在内存中。因此，变量可以指定不同的数据类型，也就是上面我们说的五种基本类型。具体python每个类型实现可以通过查看托管在github上的cpython的仓库，其中对于每种类型都有指定C语言文件描述，地址为：https://github.com/python/cpython/tree/main/Objects
```python
def show_python_variables():
    """
    1.复数：一种表示格式是x + yj，其中x（实部）和y（虚部）都是浮点数，j（或J）表示-1的平方根（这是一个虚数）。
    2.复数实际应用：主要应用于物理学分析（如信号分析、电磁场、量子力学等等），反正是蛮高深的，不要问太多，我也不懂!:)
    3.复数可以通过real、imag打印实部和虚部，如print(number_type_4.real, number_type_4.imag)  # 输出1.0， 2.0
    4.复数可以没有实部，除了x + yj形式创建外，还可以通过complex(x, y)内置函数创建
    5.注意，只要带有小数点就是浮点型，比如3.0是浮点型而不是整形
    6.注意，python2.x可能你会看到一种长整型的声明方式，也就是数字的末尾带L（2.2后默认int类型数据溢出后会自动转为long类型），这种在python3.x已经移除，替换为int
    7.python中整型不用担心溢出，因为python理论上可以表示无限大的整数，直到把内存挤爆。可以通过 float("inf"),float("-inf")声明正无穷大和负无穷大
    8.无穷大加上一个常数还是无穷大，且无穷大等于无穷大，正无穷大+负无穷大=nan，nan + 常数=nan, float("nan") != float("nan")
    """
    number_type_1 = 1  # int(整型)
    number_type_2 = 3.1415926  # float(浮点型)
    number_type_3 = 3.0  # float(浮点型)
    number_type_4 = 1 + 2j  # complex(复数)
    number_type_5 = 2j  # complex(复数)
    number_type_6 = complex(1, 2)  # complex(复数)
    number_type_7 = 10e3  # 科学计数法(10000)
    number_type_8 = 10.24e2  # 科学计数法(1024)

    string_type_1 = 'name'  # string(字符串)
    string_type_2 = str('jalen')  # string(字符串)

    list_type_1 = [1, 2, 3]  # list(列表)
    list_type_2 = [1, 'a', 3.1415926, 'jalen']  # list(列表)
    list_type_3 = list('abcde')  # list(列表)

    tuple_type_1 = (1, 2, 3, 4)  # tuple(元组)
    tuple_type_2 = (1, 'a', 3.1415926, 'jalen')  # tuple(元组)
    tuple_type_3 = tuple('abcde')  # tuple(元组)

    dict_type_1 = {1, 2, 3, 4}
    dict_type_2 = {'name': 'jalen', 'age': 30}
    dict_type_3 = {100: '满分', '合格': 60, 3.1415926: '圆周率Π'}
    print('All variables showed.')


if __name__ == '__main__':
    show_python_variables()
```

# String（字符串）

## 定义
string（字符串）是由零个或多个字符组成的有限序列。几乎每种高级语言中都有这个类型，它是编程语言中表示文本的数据类型。string在数据结构中又叫“串”，串通常会连带着有一些基本的操作，比如在串中查找某个子串（模式匹配）、求取一个子串、根据某个字符拆分、在串的某个位置上插入一个子串以及删除一个子串等等。在Python中，字符串属于不可变对象，不支持原地修改，如果需要修改其中的值，只能重新创建一个新的字符串对象。如果确实需要一个支持原地修改的unicode数据对象，可以使用io.StringIO对象或array模块。通过io.StringIO对象的seek()方法定位并调用其write()方法重新写入新串。对于字符串是否可变，我们可以通过id函数查看变量的内存地址进行验证（使用hex(id(i)) 可以查看16进制的内存地址）。
```python
def string_immutable_test():
    from io import StringIO
    """
    1.从下面测试来看，可以看出Python对字符串常量做了缓存
    2.表明python类似java一样存在一个字符串常量池,对于不可变对象可以重复利用
    3.使用str（num）创建字符串后id不同，说明python对于类型转换的变量不会缓存在常量池中
    """
    s1 = '123'
    s2 = '123'
    print(id(s1) == id(s2))  # True
    print(s1 is s2)  # True

    s3 = str('123444')
    s4 = str('123444')  # 这里并不会开辟新的地址，s4和s3指向同一块内存区域
    print(id(s3) == id(s4))  # True
    print(s3 is s4)  # True

    s5 = str('1')
    s6 = str('1')
    print(id(s5) == id(s6))  # True
    print(s5 is s6)  # True

    s7 = str(5)  # 这里意思是将一个number类型数字转换为string
    s8 = str(5)
    print(id(s7) == id(s8))  # False
    print(s7 is s8)  # False

    s9 = str(1)
    s10 = str(1)
    print(id(s9) == id(s10))  # False
    print(s9 is s10)  # False

    s11 = 'hello'
    s12 = str('hello')
    print(id(s11) == id(s12))  # True
    print(s11 is s12)  # True

    name_io = StringIO()
    name_io.seek(0)
    name_io.write('jones')
    print(name_io.getvalue())
    name_io.seek(0)
    name_io.write('jalen')
    print(name_io.getvalue())  # 原地修改字符串
    print('String object has changed.')
    name_io.close()  # 关闭io流，内存释放


if __name__ == '__main__':
    string_immutable_test()
```

## 操作
1. 字符串拼接
```python
def show_string_append():
    # 1.使用'+'号拼接
    string_1 = 'cat'
    string_2 = 'fish'
    introduce = string_1 + ' like ' + string_2
    print(introduce)  # cat like fish

    # 2.如果不是变量形式，可以直接书写（中间可以带或者不带空格）
    string_3 = 'cat' ' like '  'fish'
    print(string_3)  # cat like fish
    string_4 = 'cat'' like ''fish'
    print(string_4)  # cat like fish

    # 3.list列表转换为str
    list_1 = ['cat', 'like', 'fish']
    string_5 = ' '.join(list_1)
    print(string_5)  # cat like fish

    # 4.使用占位符拼接
    string_6 = '%s like %s' % ('cat', 'fish')
    print(string_6)  # cat like fish


if __name__ == '__main__':
    show_string_append()
```

2. 字符串包含
```python
def show_string_contains():
    string_foo = 'I always cheat my teammates when playing LOL!'
    string_bar = 'cheat'

    # 1.使用in判断是否包含
    if string_bar in string_foo:
        print('foo contains bar')

    # 2.1 可以借助find, find()返回匹配到的第一个mapping上字符的下标（从0开始，第一位是0），
    if string_foo.find(string_bar) >= 0:  # 此处返回下标为9
        print('foo contains bar')
    # 2.2 相反，可以借助rfind()返回匹配到的最后一个mapping上的字符的下表
    if string_foo.rfind(string_bar) >= 0:  # 此处返回下标为9
        print('foo contains bar')

    # 3.借助re模块的findall方法，如果返回的列表不为空，说明有匹配上
    import re
    if re.findall(string_bar, string_foo, flags=re.I):  # re.I中的I意思是ignorecase，表示忽略大小写
        print('foo contains bar')

    # 4.判断字符串从子串开始
    if string_foo.startswith('I always cheat'):
        print('foo start with bar')

    # 5.判断字符串从子串结束
    if string_foo.endswith('LOL!'):
        print('foo end with LOL!')

    # 6.1 返回第一个匹配到的子字符串的索引号,注意如果不包含会抛出ValueError异常
    if string_foo.index(string_bar) >= 0:
        print('foo contains bar')
    # 6.2 返回最后一个匹配到的子字符串的索引号
    if string_foo.rindex(string_bar) >= 0:
        print('foo contains bar')


if __name__ == '__main__':
    show_string_contains()
```

3. 字符串拆分
```python
def show_string_split():
    # 1.使用内置的split函数拆分
    string_foo = 'Jalen,Jones,Jady'
    list_foo = string_foo.split(',')
    print(list_foo)

    # 2.使用re模块的split函数拆分
    import re
    list_foo = re.split(',', string_foo)
    print(list_foo)

    # 3.使用re模块的split函数通过正则表达式拆分
    text = "python is, an easy; language; to, learn. right? Yes. "
    list_text = re.split(r'; |, |\\? |. ', text)
    print(list_text)

    # 4.根据换行符('\r', '\r\n', \n')按行拆分，适用于文章拆分
    # 注：通常Linux的换行符是\n，而Windows的换行符是\r\n
    text = 'Hello Jones, \rI am new here!\n Thanks! \r\n My pleasure!'
    split_text = text.splitlines()
    print(split_text)


if __name__ == '__main__':
    show_string_split()
```

4. 字符串大小写转换
```python
def show_lower_upper_transfer():
    text = "I am a boy!"

    # 1.全部转大写
    upper_text = text.upper()
    print(upper_text)  # I AM A BOY!
    print(upper_text.isupper())

    # 2.全部转小写
    lower_text = text.lower()
    print(lower_text)  # i am a boy!
    print(lower_text.islower())

    # 3.让句子中的所有单词都是以大写字母开始
    upper_camel = text.title()
    print(upper_camel)  # I Am A Boy!
    print(upper_camel.istitle())

    # 4.大小写字母反转(大写变小写，小写变大写)
    swap_text = text.swapcase()
    print(swap_text)  # i AM A BOY!

    # 5.把第一个字母转化为大写字母，其余小写
    text = 'i am a boy!'
    cap_text = text.capitalize()
    print(cap_text)


if __name__ == '__main__':
    show_lower_upper_transfer()
```


## 内存模型
串的两种最基本的存储方式是顺序存储方式和链接存储方式。

## 编码

